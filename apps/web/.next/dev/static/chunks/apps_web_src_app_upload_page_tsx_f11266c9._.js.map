{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/johnny/Projects/johnny-music/apps/web/src/app/upload/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, FormEvent, ChangeEvent, DragEvent } from 'react';\nimport { useCategories } from '@johnny/api';\nimport { useUploadMusic } from '@johnny/api';\nimport { useQueryClient } from '@tanstack/react-query';\n\ninterface FileMetadata {\n  title: string;\n  titleZh: string;\n}\n\nexport default function UploadPage() {\n  // Batch upload state\n  const [files, setFiles] = useState<File[]>([]);\n  const [filesMetadata, setFilesMetadata] = useState<Record<string, FileMetadata>>({});\n\n  // Common metadata state\n  const [artist, setArtist] = useState<string>('');\n  const [artistZh, setArtistZh] = useState<string>('');\n  const [performer, setPerformer] = useState<string>('');\n  const [category, setCategory] = useState<string>('');\n  const [categoryZh, setCategoryZh] = useState<string>('');\n  const [newCategory, setNewCategory] = useState<string>('');\n  const [series, setSeries] = useState<string>('');\n  const [seriesZh, setSeriesZh] = useState<string>('');\n  const [newSeries, setNewSeries] = useState<string>('');\n  const [newArtist, setNewArtist] = useState<string>('');\n\n  const [submissionMessage, setSubmissionMessage] = useState<string>('');\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\n  const [isDragging, setIsDragging] = useState<boolean>(false);\n  const [uploadProgress, setUploadProgress] = useState<string>('');\n\n  const uploadEnabled = process.env.NEXT_PUBLIC_UPLOAD_ENABLED === 'true';\n\n  const { config, loading: categoriesLoading } = useCategories();\n  const categories = config.categories || [];\n  const musicians = config.musicians || [];\n  const seriesList = config.series || [];\n  const uploadMusicMutation = useUploadMusic();\n  const queryClient = useQueryClient();\n\n  useEffect(() => {\n    if (categories.length > 0 && !category) {\n      setCategory(categories[0].en);\n    }\n  }, [categories, category]);\n\n  useEffect(() => {\n    if (musicians.length > 0 && !artist) {\n      setArtist(musicians[0].en);\n      setArtistZh(musicians[0].zh);\n    }\n  }, [musicians, artist]);\n\n  if (!uploadEnabled) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col justify-center items-center p-4\">\n        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">Not Found</h1>\n        <p className=\"text-gray-600 dark:text-gray-400\">This page is not available in the current environment.</p>\n      </div>\n    );\n  }\n\n  const handleFileSelection = (selectedFiles: FileList | File[]) => {\n    const newFiles: File[] = [];\n    const newMetadata: Record<string, FileMetadata> = { ...filesMetadata };\n    const fileList = selectedFiles instanceof FileList ? Array.from(selectedFiles) : selectedFiles;\n\n    for (const file of fileList) {\n      if (file.size > 50 * 1024 * 1024) {\n        alert(`文件 ${file.name} 大小不能超过50MB`);\n        continue;\n      }\n      // Check if file already exists in current list to avoid duplicates if needed,\n      // but for now let's allow adding more.\n      // Actually, standard input behavior replaces. Let's append if checking, or replace if simpler.\n      // The prompt implies \"batch upload\", usually means adding multiple.\n      // Let's go with appending newly selected files to existing list.\n\n      const isDuplicate = files.some(f => f.name === file.name && f.size === file.size);\n      if (!isDuplicate) {\n        newFiles.push(file);\n        const nameWithoutExt = file.name.replace(/\\.mp3$/, '');\n        // Use a unique key for metadata, usually filename is enough for simple usage\n        // but if user uploads same file twice it might be tricky.\n        // Let's assume filename is unique enough for this session context.\n        newMetadata[file.name] = {\n          title: nameWithoutExt,\n          titleZh: nameWithoutExt,\n        };\n      }\n    }\n\n    setFiles(prev => [...prev, ...newFiles]);\n    setFilesMetadata(newMetadata);\n  };\n\n  const removeFile = (fileName: string) => {\n    setFiles(prev => prev.filter(f => f.name !== fileName));\n    const newMeta = { ...filesMetadata };\n    delete newMeta[fileName];\n    setFilesMetadata(newMeta);\n  };\n\n  const updateFileMetadata = (fileName: string, field: keyof FileMetadata, value: string) => {\n    setFilesMetadata(prev => ({\n      ...prev,\n      [fileName]: {\n        ...prev[fileName],\n        [field]: value,\n      },\n    }));\n  };\n\n  const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      handleFileSelection(e.target.files);\n    }\n    // Reset input value so same files can be selected again if needed (though we handle duplicates check)\n    e.target.value = '';\n  };\n\n  const handleDragOver = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n  };\n\n  const handleDrop = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFileSelection(e.dataTransfer.files);\n    }\n  };\n\n  const handleCategoryChange = (e: ChangeEvent<HTMLSelectElement>) => {\n    const selectedEn = e.target.value;\n    setCategory(selectedEn);\n    if (selectedEn === '__NEW__') {\n      setCategoryZh('');\n      setNewCategory('');\n    }\n  };\n\n  const handleAddCategory = () => {\n    if (newCategory) {\n      setCategory(newCategory);\n      setNewCategory('');\n    }\n  };\n\n  const handleArtistChange = (e: ChangeEvent<HTMLSelectElement>) => {\n    const selectedEn = e.target.value;\n    setArtist(selectedEn);\n    if (selectedEn === '__NEW__') {\n      setArtistZh('');\n      setNewArtist('');\n    } else {\n      const selected = musicians.find(m => m.en === selectedEn);\n      if (selected) {\n        setArtistZh(selected.zh);\n      }\n    }\n  };\n\n  const handleAddArtist = () => {\n    if (newArtist) {\n      setArtist(newArtist);\n      setNewArtist('');\n    }\n  };\n\n  const handleSeriesChange = (e: ChangeEvent<HTMLSelectElement>) => {\n    const selectedEn = e.target.value;\n    setSeries(selectedEn);\n    if (selectedEn === '__NEW__') {\n      setSeriesZh('');\n      setNewSeries('');\n    } else {\n      const selected = seriesList.find(s => s.en === selectedEn);\n      if (selected) {\n        setSeriesZh(selected.zh);\n      } else {\n        if (selectedEn === '') setSeriesZh('');\n      }\n    }\n  };\n\n  const handleAddSeries = () => {\n    if (newSeries) {\n      setSeries(newSeries);\n      setNewSeries('');\n    }\n  };\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    if (files.length === 0) {\n      alert('请选择至少一个要上传的MP3文件。');\n      return;\n    }\n\n    setIsSubmitting(true);\n    setSubmissionMessage('准备上传...');\n    let successCount = 0;\n    let failCount = 0;\n\n    try {\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        const meta = filesMetadata[file.name] || { title: file.name.replace(/\\.mp3$/, ''), titleZh: '' };\n\n        setUploadProgress(`正在上传 (${i + 1}/${files.length}): ${file.name}`);\n\n        try {\n          await uploadMusicMutation.mutateAsync({\n            file,\n            musicInfo: {\n              title: meta.title,\n              title_zh: meta.titleZh,\n              artist: artist === '__NEW__' ? newArtist : artist,\n              artist_zh: artist === '__NEW__' ? artistZh : (musicians.find(m => m.en === artist)?.zh || artistZh),\n              performer,\n              category: category === '__NEW__' ? newCategory : category,\n              category_zh: categoryZh,\n              series: series === '__NEW__' ? newSeries : series,\n              series_zh: series === '__NEW__' ? seriesZh : (seriesList.find(s => s.en === series)?.zh || seriesZh),\n              id: crypto.randomUUID(),\n            },\n          });\n          successCount++;\n        } catch (error) {\n          console.error(`Failed to upload ${file.name}:`, error);\n          failCount++;\n        }\n      }\n\n      queryClient.invalidateQueries({ queryKey: ['music'] });\n\n      if (failCount === 0) {\n        setSubmissionMessage(`全部 ${successCount} 个文件上传成功！`);\n        setFiles([]);\n        setFilesMetadata({});\n      } else {\n        setSubmissionMessage(`上传完成: ${successCount} 成功, ${failCount} 失败。`);\n      }\n\n      // Reset common fields if desired, or keep them for next batch?\n      // Keeping them is usually better for batch operations. \n      // User only asked for batch operation, usually implies reusing common data.\n      setTimeout(() => {\n        if (failCount === 0) setSubmissionMessage('');\n        setUploadProgress('');\n      }, 3000);\n\n    } catch (error: unknown) {\n      console.error('Batch submission error:', error);\n      const message = error instanceof Error ? error.message : '发生网络错误。';\n      setSubmissionMessage(`上传过程发生错误: ${message}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col justify-center items-center p-4\">\n      <div className=\"max-w-4xl w-full bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg\">\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 text-center\">批量上传音乐</h1>\n\n        {submissionMessage && (\n          <div className={`mb-4 p-4 text-sm rounded-lg ${submissionMessage.includes('失败') || submissionMessage.includes('错误') ? 'text-red-700 bg-red-100 dark:bg-red-200 dark:text-red-800' : 'text-green-700 bg-green-100 dark:bg-green-200 dark:text-green-800'}`} role=\"alert\">\n            <span className=\"font-medium\">{submissionMessage}</span>\n          </div>\n        )}\n\n        {uploadProgress && (\n          <div className=\"mb-4 p-2 text-sm text-blue-700 bg-blue-100 dark:bg-blue-900 dark:text-blue-200 rounded-lg text-center\">\n            {uploadProgress}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n\n          {/* File Upload Area */}\n          <div>\n            <label htmlFor=\"file-upload\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              MP3 文件 (支持多选)\n            </label>\n            <div\n              className={`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 ${isDragging ? 'border-indigo-500' : 'border-gray-300 dark:border-gray-600'} border-dashed rounded-md`}\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={handleDrop}\n            >\n              <div className=\"space-y-1 text-center\">\n                <svg className=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\" aria-hidden=\"true\">\n                  <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                </svg>\n                <div className=\"flex text-sm text-gray-600 dark:text-gray-400 justify-center\">\n                  <label htmlFor=\"file-upload\" className=\"relative cursor-pointer bg-white dark:bg-gray-800 rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500\">\n                    <span>选择文件</span>\n                    <input id=\"file-upload\" name=\"file-upload\" type=\"file\" className=\"sr-only\" accept=\".mp3\" multiple onChange={handleFileChange} disabled={isSubmitting} />\n                  </label>\n                  <p className=\"pl-1\">或拖放文件</p>\n                </div>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">单文件 MP3 小于 50MB</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Selected Files List */}\n          {files.length > 0 && (\n            <div className=\"space-y-4 max-h-96 overflow-y-auto p-2 border border-gray-200 dark:border-gray-700 rounded-md\">\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 sticky top-0 bg-white dark:bg-gray-800 pb-2 border-b border-gray-200 dark:border-gray-700\">\n                已选择 {files.length} 个文件\n              </h3>\n              {files.map((file, index) => (\n                <div key={`${file.name}-${index}`} className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg relative\">\n                  <button\n                    type=\"button\"\n                    onClick={() => removeFile(file.name)}\n                    className=\"absolute top-2 right-2 text-red-500 hover:text-red-700 text-sm\"\n                    disabled={isSubmitting}\n                  >\n                    删除\n                  </button>\n                  <div className=\"mb-2 text-sm text-gray-500 dark:text-gray-400 font-mono break-all pr-8\">\n                    {file.name} ({Math.round(file.size / 1024 / 1024 * 100) / 100} MB)\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">Name (English)</label>\n                      <input\n                        type=\"text\"\n                        value={filesMetadata[file.name]?.title || ''}\n                        onChange={(e) => updateFileMetadata(file.name, 'title', e.target.value)}\n                        disabled={isSubmitting}\n                        className=\"mt-1 block w-full px-2 py-1 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm text-gray-900 dark:text-gray-100\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">名称 (中文)</label>\n                      <input\n                        type=\"text\"\n                        value={filesMetadata[file.name]?.titleZh || ''}\n                        onChange={(e) => updateFileMetadata(file.name, 'titleZh', e.target.value)}\n                        disabled={isSubmitting}\n                        className=\"mt-1 block w-full px-2 py-1 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm text-gray-900 dark:text-gray-100\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Common Metadata */}\n          <div className=\"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border border-gray-200 dark:border-gray-700\">\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4\">公共属性 (应用于所有文件)</h3>\n\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <label htmlFor=\"artist\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Musician / Composer (English)</label>\n                <select id=\"artist\" value={artist} onChange={handleArtistChange} disabled={isSubmitting || categoriesLoading} className=\"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\">\n                  {musicians.map((m) => (<option key={m.id} value={m.en}>{m.en}</option>))}\n                  <option value=\"__NEW__\">Add New...</option>\n                </select>\n                {artist === '__NEW__' && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    <input type=\"text\" value={newArtist} onChange={(e) => setNewArtist(e.target.value)} placeholder=\"New Musician (EN)\" disabled={isSubmitting} className=\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n                    <div className=\"flex space-x-2\">\n                      <input type=\"text\" id=\"artistZh\" value={artistZh} onChange={(e) => setArtistZh(e.target.value)} placeholder=\"音乐家 (中文)\" disabled={isSubmitting} className=\"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n                      <button type=\"button\" onClick={handleAddArtist} disabled={isSubmitting} className=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 whitespace-nowrap\">Add</button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div>\n                <label htmlFor=\"performer\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Performer / 演奏者</label>\n                <input type=\"text\" id=\"performer\" value={performer} onChange={(e) => setPerformer(e.target.value)} disabled={isSubmitting} className=\"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n              </div>\n\n              <div>\n                <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Category (English)</label>\n                <select id=\"category\" value={category} onChange={handleCategoryChange} disabled={isSubmitting || categoriesLoading} className=\"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\">\n                  {categories.map((cat) => (<option key={cat.id} value={cat.en}>{cat.en}</option>))}\n                  <option value=\"__NEW__\">Add New...</option>\n                </select>\n                {category === '__NEW__' && (\n                  <div className=\"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    <input type=\"text\" value={newCategory} onChange={(e) => setNewCategory(e.target.value)} placeholder=\"New Category (EN)\" disabled={isSubmitting} className=\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n                    <div className=\"flex space-x-2\">\n                      <input type=\"text\" value={categoryZh} onChange={(e) => setCategoryZh(e.target.value)} placeholder=\"新分类 (中文)\" disabled={isSubmitting} className=\"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n                      <button type=\"button\" onClick={handleAddCategory} disabled={isSubmitting} className=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 whitespace-nowrap\">Add</button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <label htmlFor=\"series\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Series (English)</label>\n                <select id=\"series\" value={series} onChange={handleSeriesChange} disabled={isSubmitting || categoriesLoading} className=\"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\">\n                  <option value=\"\">None / Optional</option>\n                  {seriesList.map((s) => (<option key={s.id} value={s.en}>{s.en}</option>))}\n                  <option value=\"__NEW__\">Add New...</option>\n                </select>\n                {series === '__NEW__' && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    <input type=\"text\" value={newSeries} onChange={(e) => setNewSeries(e.target.value)} placeholder=\"New Series (EN)\" disabled={isSubmitting} className=\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n                    <div className=\"flex space-x-2\">\n                      <input type=\"text\" id=\"seriesZh\" value={seriesZh} onChange={(e) => setSeriesZh(e.target.value)} placeholder=\"系列 (中文)\" disabled={isSubmitting} className=\"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100\" />\n                      <button type=\"button\" onClick={handleAddSeries} disabled={isSubmitting} className=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 whitespace-nowrap\">Add</button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <button type=\"submit\" disabled={isSubmitting || files.length === 0} className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\">\n              {isSubmitting ? '正在提交...' : `提交 (${files.length} 个文件)`}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}